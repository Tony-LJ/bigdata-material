
# 项目五 Web网站攻击与防御

---

## DVWA服务器
```.text
一、什么是SQL注入攻击
二、SQL注入攻击的分类
三、SQL注入攻击的过程
四、SQL注入攻击工具
五、SQL注入的防御
```
### 什么是SQL注入攻击
```.text
SQL注入攻击是一种常见的网络安全威胁，主要针对使用结构化查询语言(SQL)进行数据库操作的应用程序。通过利用应用程序对用户输入数据的不正确处理，攻击者可以在SQL查询中注入恶意代码，从而达到恶意目的。
SQL注入攻击的原理:
SQL注入攻击的原理是利用应用程序对用户输入数据的不完全过滤和验证。当应用程序通过用户输入构建SQL查询时，如果没有正确对用户输入进行过滤和转义，攻击者可以通过输入恶意的SQL代码来执行非授权的数据库操作。
攻击者通常通过应用程序的输入字段，如表单、URL参数、Cookie等，将恶意的SQL代码作为用户输入提交给应用程序。这些恶意代码可以被拼接到SQL查询语句中的字符串值中，借此执行任意的数据库操作，如数据泄露、数据篡改、绕过认证等。
```

### SQL注入攻击的分类
```.text
基于错误的SQL注入：
盲注：攻击者不知道数据库的结构或内容，只能通过观察应用程序的错误信息来推断数据。例如，通过观察错误信息中的字段名来猜测正确的SQL语句。
基于时间的盲注：在这种攻击中，攻击者使用SQL语句中的延迟函数（如SLEEP()在MySQL中）来观察响应时间，从而推断正确的SQL语句。
基于布尔的SQL注入：
攻击者通过改变某些条件（通常是WHERE子句中的条件）来观察应用程序的响应是否发生变化，从而推断数据库中的数据。
联合查询注入（UNION-based SQL Injection）：
攻击者通过在原始查询中添加UNION SELECT语句来合并另一个查询的结果集，从而可以检索或篡改数据库中的数据。
堆叠查询注入（Stacked Queries SQL Injection）：
攻击者可以在一个查询之后直接执行另一个查询，通常通过在SQL语句末尾添加分号（;）。
基于时间的盲注：
使用数据库的延迟函数（如SLEEP()），攻击者通过观察响应时间的变化来推断数据库中的数据。
基于布尔的盲注：
类似于基于布尔的SQL注入，但通常用于无法直接看到返回数据的场景。
基于输出的注入：
攻击者通过修改查询以返回额外的数据，这些数据随后被显示在应用程序的输出中。例如，通过修改查询返回额外的列。
二次注入：
当应用程序在处理来自用户的输入后，没有正确清理或转义这些输入就直接用于构建SQL查询时，就可能发生二次注入。例如，当用户输入被用在多个地方构建查询时。
```

### SQL注入攻击的过程
```.text

```

### SQL注入攻击工具
```.text
SQL注入漏洞检测工具：
SQLMap：SQLMap是一款功能强大的自动化SQL注入和数据库接管工具。它支持多种数据库管理系统，可以自动检测和利用SQL注入漏洞，并提供多种注入技术和手段。
Acunetix：Acunetix是一款综合性的Web应用程序安全扫描工具，其中包括SQL注入漏洞检测功能。它可以扫描整个应用程序，发现潜在的SQL注入漏洞，并提供详细的报告和建议。
AppScan：AppScan是IBM提供的一款全面的Web应用程序安全扫描工具，其中包括SQL注入漏洞检测功能。它可以自动发现和验证SQL注入漏洞，并提供修复建议和报告。
Nessus：Nessus是一款广泛使用的漏洞扫描工具，其中包括SQL注入漏洞检测功能。它可以扫描网络和应用程序，发现潜在的SQL注入漏洞，并提供修复建议和报告。
Burp Suite：Burp Suite是一款常用的Web应用程序安全测试工具，其中包括SQL注入漏洞检测功能。它可以拦截和修改应用程序的请求，发现潜在的SQL注入漏洞，并提供修复建议和报告。
```

### SQL注入的防御
```.text
使用参数化查询或预编译语句：参数化查询是一种将用户输入的数据与SQL语句分开处理的方法，可以防止恶意代码的注入。预编译语句是在执行之前将SQL语句和参数分开处理，也可以有效地防止SQL注入攻击。
输入验证和过滤：对于用户输入的数据，进行严格的验证和过滤，确保输入的数据符合预期的格式和类型。可以使用正则表达式或其他验证方法来验证输入数据的合法性。
最小权限原则：在数据库中为应用程序使用的账户分配最小权限，只赋予执行必要操作的权限，避免使用具有过高权限的账户。
防火墙和安全策略：使用防火墙和安全策略来限制数据库服务器的访问权限，只允许来自可信来源的请求访问数据库。
输入数据编码：对于用户输入的数据，在存储或传输之前进行适当的编码，以防止恶意代码的注入。常见的编码方法包括HTML编码、URL编码等。
定期更新和修补：及时更新数据库软件和相关组件的补丁，以修复已知的安全漏洞。
安全培训和意识提升：对开发人员进行安全培训，提高他们对SQL注入等安全问题的认识和意识，以便他们能够编写安全的代码。
```

## 跨站脚本攻防
```.text
一、跨站脚本漏洞
二、跨站脚本攻击的类型
三、跨站脚本攻击的防御
```
### 跨站脚本漏洞
```.text

```
### 跨站脚本攻击的类型
```.text
跨站脚本攻击（XSS）主要分为三种类型：
存储型XSS
攻击者将恶意脚本上传至服务器（如论坛、留言板等），当用户访问包含这些脚本的页面时，脚本会被执行。这类攻击具有持久性，影响范围广泛。 ‌
反射型XSS
通过诱导用户点击包含恶意代码的链接或表单，服务器将恶意脚本作为响应内容返回客户端执行。这种攻击通常是一次性的，但可通过社交媒体快速传播。 ‌
DOM型XSS
利用客户端JavaScript处理用户输入时的漏洞，直接在浏览器环境中执行恶意脚本，无需服务器端参与。这类攻击更隐蔽且难以防范
```
### 跨站脚本攻击的防御
```.text

```


## 跨站请求伪造攻防
```.text
一、跨站请求攻击的原理: Cookie原理、Session原理
二、跨站请求伪造攻击技术
三、跨站请求攻击的防御
```

### 跨站请求攻击的原理: Cookie原理、Session原理
```.text

```
### 跨站请求伪造攻击技术
```.text

```
### 跨站请求攻击的防御
```.text

```

## 文件上传漏洞检测与防御
```.text
一、文件上传攻击的原理
二、文件上传攻击的条件
三、文件上传攻击的类型
四、文件上传攻击的防范
```
### 文件上传攻击的原理
```.text

```
### 文件上传攻击的条件
```.text
满足几个条件：
1.上传的文件能够被web容器解释执行。所以文件上传后所在的目录要是web容器所覆盖到的路径。
2.用户能从web上访问这个文件。
3.用户上传的文件若被安全检查、格式化、图片压缩等功能改变了内容，则也可能导致攻击不成功。
```
### 文件上传攻击的类型
```.text
文件上传攻击主要分为以下类型：
恶意代码执行
攻击者通过上传带有恶意代码的文件（如.php、.jsp等动态脚本文件），服务器可能直接执行这些文件中的代码，导致远程代码执行（RCE）.
Webshell攻击
上传Web后门文件（Webshell），获取服务器控制权。此类文件允许攻击者在服务器上执行命令、查看/修改文件，甚至获取系统权限。
信息泄露
上传恶意文件（如图像文件），通过这些文件推断服务器配置或利用其他漏洞提取敏感信息。
拒绝服务（DoS）
通过上传大文件消耗服务器存储资源，导致服务异常。
绕过防御机制
常见手法包括修改文件名、使用特殊字符编码、利用客户端漏洞等，例如将文件伪装为图片或压缩包绕过内容检测
```
### 文件上传攻击的防范
```.text

```

## 参考资料
- [Windows下搭建DVWA渗透环境](https://blog.csdn.net/keylion_/article/details/80318594)
- [DVWA官网](http://www.dvwa.co.uk/)
- [什么是SQL注入攻击，如何防范这种类型的攻击？](https://cloud.tencent.com/developer/article/2322854)
- [10 个 SQL 注入工具（非常详细）](https://blog.csdn.net/pfourfire/article/details/147046765)
- [什么是跨站脚本攻击（XSS）？](https://info.support.huawei.com/info-finder/encyclopedia/zh/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB.html)
- [xss漏洞有哪些类型（非常详细）](https://blog.csdn.net/chengxuyuanyy/article/details/143322851)
- [对跨站脚本攻击(XSS)的防御策略?](https://developer.aliyun.com/article/1589200)
- [跨站请求伪造CSRF引发的思考Cookie、Session、Token和JWT](https://blog.csdn.net/wdquan19851029/article/details/122175054)
- [接口测试(28)彻底理解cookie，session，token的使用及原理2](https://developer.aliyun.com/article/1107318)
- [网络安全防护：跨站点请求伪造（CSRF）](https://blog.csdn.net/xike1024/article/details/148643787)
- [如何防范 CSRF 攻击](https://developer.aliyun.com/article/1636748)
- [安全渗透攻防演练——2、低安全级别文件上传渗透攻击](https://zhuanlan.zhihu.com/p/686135782)
- [从上传到入侵：揭秘文件上传漏洞的操作原理](https://blog.csdn.net/m0_59598029/article/details/146134169)
- [PHP代码审计------文件上传攻击](https://blog.csdn.net/bylfsj/article/details/101158894)
- [干货：网站常见文件上传漏洞攻击手法和防范](https://blog.csdn.net/u013528853/article/details/136888331)










